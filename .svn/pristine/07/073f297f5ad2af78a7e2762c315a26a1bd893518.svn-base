<template>
  <!--飞行证书添加-->
  <div class="wrapper">
    <div class="group">
      <label>证书类型</label>
      <ul class="selection-list">
        <router-link :to="{path:'/fxzsSelZs'}" tag="li">
        <li class="selection">
          <span class="selected">{{selectItem}}</span>
            <i class="iconfont icon-enter common-right"></i>
        </li>
        </router-link>
      </ul>
    </div>
    <div class="group">
      <label>证书编号</label>
      <ul class="selection-list">
        <li class="selection">
          <div class="input-box">
            <input type="text" placeholder="请输入证书编号"/>
          </div>
        </li>
      </ul>
    </div>
    <div class="group">
      <label>签证日期</label>
      <ul class="selection-list">
        <li class="selection" @click="openStartTimepicker">
          <div class="input-box">
            <span>{{! signDate==""?signDate:"请选择签证日期"}}</span>
          </div>
        </li>
      </ul>
    </div>
    <div class="group">
      <label>有效日期</label>
      <ul class="selection-list">
        <li class="selection" @click="openValidTimepicker">
          <div class="input-box">
            <span>{{! validDate==""?validDate:"请选择有效期"}}</span>
          </div>
        </li>
      </ul>
    </div>
    <div class="group">
      <label>证书级别</label>
      <ul class="selection-list">
        <li class="selection">
          <div class="input-box">
            <select class="common-sel">
              <option>Ⅰ级</option>
              <option>Ⅱ级</option>
              <option> Ⅲ级</option>
              <option> Ⅳ级</option>
              <option>Ⅴ级</option>
            </select>
          </div>
        </li>
      </ul>
    </div>
    <div class="group">
      <label>持证人</label>
      <ul class="selection-list">
        <li class="selection">
          <div class="input-box">
            <input type="text" placeholder="请输入持证人姓名" value="小明"/>
          </div>
        </li>
      </ul>
    </div>
    <div class="group">
      <label>身份证号</label>
      <ul class="selection-list">
        <li class="selection">
          <div class="input-box">
            <input type="text" placeholder="请输入身份证号" value="32068219961140"/>
          </div>
        </li>
      </ul>
    </div>

    <div class="group border-style">
      <label>证书照片</label>
      <ul class="selection-list">
        <li class="selection">
        <span class="tips">(请将人脸和证书置于取景框中)</span>
          <router-link :to="{path:'/yhzcPersonTip'}" tag="i">
            <i class="iconfont q-style icon-31yiwen"></i>
          </router-link>

        </li>
      </ul>
    </div>
    <div class="pic">
      <div class="pic-style">
        <input type="file"  capture="camera" accept="image/jpeg,image/gif,image/jpg,image/png" style="opacity: 0" @change="onFileChange">
        <i class="icon-zhaoxiangji1 iconfont" v-if="!image"></i>
        <img :src="image" v-else/>
      </div>
    </div>

    <router-link :to="{path:'/fxzs'}" tag="div">
      <div class="submit-bg">
        <span class="submit-style">提交</span>
      </div>
    </router-link>

    <mt-datetime-picker
      ref="SignDatePicker"
      type="date"
      year-format="{value} 年"
      month-format="{value} 月"
      date-format="{value} 日"
      @confirm="handleSignDatePicker">
    </mt-datetime-picker>
    <mt-datetime-picker
      ref="ValidDatePicker"
      type="date"
      year-format="{value} 年"
      month-format="{value} 月"
      date-format="{value} 日"
      @confirm="handleValidDatepicker">
    </mt-datetime-picker>


  </div>

</template>
<script>
  import bus from '@/assets/eventBus';
  export default {
      data(){
          return{
            SignDatePicker: new Date(),
            ValidDatePicker:new Date(),
            signDate:"",
            validDate:"",
            image:null,
            selectItem:"请选择证件类型"
          }
      },
    methods:{
      openStartTimepicker() {
        this.$refs.SignDatePicker.open();
      },
      openValidTimepicker() {
        this.$refs.ValidDatePicker.open();
      },
      handleSignDatePicker(date) {
        var str = date.Format("YYYY-MM-DD");
        this.signDate = str;
      },
      handleValidDatepicker(date) {
        var str = date.Format("YYYY-MM-DD");
        this.validDate = str;
      },
      submitForm() {
        this.$router.replace("/")
      },
      onFileChange(e) {
        var files = e.target.files || e.dataTransfer.files;
        if (!files.length)
          return;
        this.createImage(files[0]);
      },
      createImage(file) {
        var image = new Image();
        var reader = new FileReader();
        var vm = this;

        reader.onload = (e) => {
          vm.image = e.target.result;
        };
        reader.readAsDataURL(file);
      },
      created(){
        console.log("created");
        var self = this;
        bus.$on("fxzsSelZs",function(selectItem){
          console.log("hhhhh");
//          self.formData.fxzsObj = selectItem;
        });
      },
    }
  }
</script>

<style rel="stylesheet/scss" lang="scss">
  @import '../../assets/sass/_base';
  .wrapper {
    overflow-y: auto !important;
    overflow-x: hidden;
    background: white;
    position: absolute;
    top:0;
    left: 0;
    bottom: 0;
    right: 0;
    .group {
      display: flex;
      background-color: #fff;
      border-width: 0 0 1px 0;
      border-style: solid;
      border-color: $border-color;
      label {
        vertical-align: middle;
        width: 30%;
        line-height: 48px;
        padding-left: 8px;
        text-align: center;
      }
      .selection-list {
        display: flex;
        flex: 1;
        flex-flow: column;
        .selection {
          width: 100%;
          height: 48px;
          position: relative;
          border-bottom: 1px solid $border-color;
          .selected{
            line-height: 48px;
            padding-left: 20px;
            color: $theme-color;
          }
          .common-right{
            color: $theme-color;
            line-height: 48px;
            font-size: 24px;
            width: 20px;
            position: absolute;
            right: 10px;

          }
          &:last-child {
            border-bottom: 0 none;
          }
          .input-box {
            padding-right: 20px;
            height: 48px;
            line-height: 48px;
            color: #6e6a6a;
            padding-left: 20px;
            & > * {
              color: $theme-color;
              border: 0 none;
            }

            .common-sel{
              width: 100%;
              line-height: 40px;
              height: 40px;
              font-size: 14px;
              option{
                width: 100%;
                line-height: 40px;
                height: 40px;
                font-size: 14px;
              }
            }
            input {
              height: 40px;
              line-height: 40px;
              font-size: 14px;
            }
            input:-webkit-autofill {

              -webkit-box-shadow: 0 0 0 1000px white inset !important;
            }

          }
          .tips{
            line-height: 50px;
            color: #6a6a6a;
            font-size: 12px;
          }
          .switch-style {
            font-size: 24px;
            width: 20px;
            position: absolute;
            right: 10px;
            color: $theme-color;
          }
          .q-style{
            font-size: 24px;
            width: 20px;
            position: absolute;
            top:12px;
            right: 10px;
            color: $theme-color;
          }
        }
      }
    }
    .border-style{
      border: 0px;
    }
    .pic{
      display: flex;
      background-color: #fff;
      height: 180px;
      text-align: center;
      padding-top: 20px;
      .pic-style{
        height: 160px;
        width: 160px;
        border: 1px dashed $border-color;
        margin: 0 auto;
        position: relative;
        text-align: center;
        i{
          font-size: 100px;
          line-height: 160px;
          color: #6a6a6a;
        }
        input{
          position: absolute;
          left: 0px;
          top: 0px;
          height: 160px;
          width: 160px;
        }
        img{
          width: 160px;
          height: 160px;
          margin: 0 auto;
        }
      }
    }
    .submit-bg{
      text-align: center;
      background: #ffffff;
      .submit-style{
        display: inline-block;
        width: 40%;
        margin-top: 20px;
        margin-bottom: 20px;
        text-align: center;
        border-radius: 40px;
        padding: 15px 10px;
        background: #2da8e1;
        color: white;
      }
    }

  }
</style>
